{"ast":null,"code":"import{useState,useEffect}from'react';import{Container,Row,Col,Pagination}from'react-bootstrap';import axios from'axios';import PostCard from'../components/PostCard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Home=()=>{const[posts,setPosts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[currentPage,setCurrentPage]=useState(1);const[totalPages,setTotalPages]=useState(0);useEffect(()=>{const fetchPosts=async()=>{try{setLoading(true);const response=await axios.get(`http://localhost:3100/posts?page=${currentPage}&limit=6`);setPosts(response.data.posts);setTotalPages(response.data.totalPages);setError(null);}catch(error){console.error('Error fetching posts:',error);setError('Errore nel caricamento dei post');setPosts([]);}finally{setLoading(false);}};fetchPosts();},[currentPage]);// Aggiunto currentPage come dipendenza\nreturn/*#__PURE__*/_jsxs(Container,{className:\"mt-5\",children:[loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Caricamento in corso...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:error}),/*#__PURE__*/_jsx(Row,{children:!loading&&posts&&posts.length>0?posts.map(post=>/*#__PURE__*/_jsx(Col,{md:4,className:\"mb-4\",children:/*#__PURE__*/_jsx(PostCard,{post:post})},post._id)):/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"p\",{children:\"Nessun post disponibile\"})})}),totalPages>1&&/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center mt-4\",children:/*#__PURE__*/_jsxs(Pagination,{children:[/*#__PURE__*/_jsx(Pagination.Prev,{disabled:currentPage===1,onClick:()=>setCurrentPage(prev=>Math.max(prev-1,1))}),[...Array(totalPages)].map((_,idx)=>/*#__PURE__*/_jsx(Pagination.Item,{active:idx+1===currentPage,onClick:()=>setCurrentPage(idx+1),children:idx+1},idx+1)),/*#__PURE__*/_jsx(Pagination.Next,{disabled:currentPage===totalPages,onClick:()=>setCurrentPage(prev=>Math.min(prev+1,totalPages))})]})})]});};export default Home;","map":{"version":3,"names":["useState","useEffect","Container","Row","Col","Pagination","axios","PostCard","jsx","_jsx","jsxs","_jsxs","Home","posts","setPosts","loading","setLoading","error","setError","currentPage","setCurrentPage","totalPages","setTotalPages","fetchPosts","response","get","data","console","className","children","length","map","post","md","_id","Prev","disabled","onClick","prev","Math","max","Array","_","idx","Item","active","Next","min"],"sources":["/Users/giuliacolli/Desktop/progetto back/front/src/pages/Home.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { Container, Row, Col, Pagination } from 'react-bootstrap';\r\nimport axios from 'axios';\r\nimport PostCard from '../components/PostCard';\r\n\r\nconst Home = () => {\r\n  const [posts, setPosts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const fetchPosts = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const response = await axios.get(`http://localhost:3100/posts?page=${currentPage}&limit=6`);\r\n        setPosts(response.data.posts);\r\n        setTotalPages(response.data.totalPages);\r\n        setError(null);\r\n      } catch (error) {\r\n        console.error('Error fetching posts:', error);\r\n        setError('Errore nel caricamento dei post');\r\n        setPosts([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchPosts();\r\n  }, [currentPage]); // Aggiunto currentPage come dipendenza\r\n\r\n  return (\r\n    <Container className=\"mt-5\">\r\n      {loading && <p>Caricamento in corso...</p>}\r\n      {error && <p className=\"text-danger\">{error}</p>}\r\n      <Row>\r\n        {!loading && posts && posts.length > 0 ? (\r\n          posts.map(post => (\r\n            <Col key={post._id} md={4} className=\"mb-4\">\r\n              <PostCard post={post} />\r\n            </Col>\r\n          ))\r\n        ) : (\r\n          <Col>\r\n            <p>Nessun post disponibile</p>\r\n          </Col>\r\n        )}\r\n      </Row>\r\n\r\n      {totalPages > 1 && (\r\n        <div className=\"d-flex justify-content-center mt-4\">\r\n          <Pagination>\r\n            <Pagination.Prev \r\n              disabled={currentPage === 1} \r\n              onClick={() => setCurrentPage(prev => Math.max(prev - 1, 1))} \r\n            />\r\n            {[...Array(totalPages)].map((_, idx) => (\r\n              <Pagination.Item \r\n                key={idx + 1} \r\n                active={idx + 1 === currentPage} \r\n                onClick={() => setCurrentPage(idx + 1)}\r\n              >\r\n                {idx + 1}\r\n              </Pagination.Item>\r\n            ))}\r\n            <Pagination.Next \r\n              disabled={currentPage === totalPages} \r\n              onClick={() => setCurrentPage(prev => Math.min(prev + 1, totalPages))} \r\n            />\r\n          </Pagination>\r\n        </div>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Home;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}