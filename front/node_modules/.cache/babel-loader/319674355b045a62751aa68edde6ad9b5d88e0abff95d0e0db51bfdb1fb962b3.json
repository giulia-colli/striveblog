{"ast":null,"code":"import{useState,useEffect}from'react';import{Container,Row,Col,Alert,Button}from'react-bootstrap';import{useAuth}from'../contexts/AuthContext';import api from'../utils/api';import PostCard from'../components/PostCard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MyPosts=()=>{const[posts,setPosts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const{user}=useAuth();const fetchMyPosts=async()=>{try{setLoading(true);const response=await api.get(`/posts?author=${user._id}`);setPosts(response.data.posts);}catch(err){console.error('Errore nel caricamento dei post:',err);setError('Errore nel caricamento dei tuoi post');}finally{setLoading(false);}};useEffect(()=>{if(user){fetchMyPosts();}},[user]);const handleDelete=async postId=>{try{await api.delete(`/posts/${postId}`);fetchMyPosts();// Ricarica i post dopo l'eliminazione\n}catch(err){setError('Errore durante la eliminazione del post');}};if(loading)return/*#__PURE__*/_jsx(Container,{className:\"mt-4\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Caricamento...\"})});if(error)return/*#__PURE__*/_jsx(Container,{className:\"mt-4\",children:/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error})});return/*#__PURE__*/_jsxs(Container,{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-4\",children:\"I Miei Post\"}),/*#__PURE__*/_jsx(Row,{children:posts.length>0?posts.map(post=>/*#__PURE__*/_jsx(Col,{md:4,className:\"mb-4\",children:/*#__PURE__*/_jsx(PostCard,{post:post,showActions:true,onDelete:()=>handleDelete(post._id)})},post._id)):/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"p\",{children:\"Non hai ancora pubblicato nessun post\"})})})]});};export default MyPosts;","map":{"version":3,"names":["useState","useEffect","Container","Row","Col","Alert","Button","useAuth","api","PostCard","jsx","_jsx","jsxs","_jsxs","MyPosts","posts","setPosts","loading","setLoading","error","setError","user","fetchMyPosts","response","get","_id","data","err","console","handleDelete","postId","delete","className","children","variant","length","map","post","md","showActions","onDelete"],"sources":["/Users/giuliacolli/Desktop/progetto back/front/src/pages/MyPosts.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { Container, Row, Col, Alert, Button } from 'react-bootstrap';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport api from '../utils/api';\r\nimport PostCard from '../components/PostCard';\r\n\r\nconst MyPosts = () => {\r\n  const [posts, setPosts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const { user } = useAuth();\r\n\r\n  const fetchMyPosts = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await api.get(`/posts?author=${user._id}`);\r\n      setPosts(response.data.posts);\r\n    } catch (err) {\r\n      console.error('Errore nel caricamento dei post:', err);\r\n      setError('Errore nel caricamento dei tuoi post');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      fetchMyPosts();\r\n    }\r\n  }, [user]);\r\n\r\n  const handleDelete = async (postId) => {\r\n    try {\r\n      await api.delete(`/posts/${postId}`);\r\n      fetchMyPosts(); // Ricarica i post dopo l'eliminazione\r\n    } catch (err) {\r\n      setError('Errore durante la eliminazione del post');\r\n    }\r\n  };\r\n\r\n  if (loading) return <Container className=\"mt-4\"><p>Caricamento...</p></Container>;\r\n  if (error) return <Container className=\"mt-4\"><Alert variant=\"danger\">{error}</Alert></Container>;\r\n\r\n  return (\r\n    <Container className=\"mt-4\">\r\n      <h2 className=\"mb-4\">I Miei Post</h2>\r\n      <Row>\r\n        {posts.length > 0 ? (\r\n          posts.map(post => (\r\n            <Col key={post._id} md={4} className=\"mb-4\">\r\n              <PostCard \r\n                post={post}\r\n                showActions={true}\r\n                onDelete={() => handleDelete(post._id)}\r\n              />\r\n            </Col>\r\n          ))\r\n        ) : (\r\n          <Col>\r\n            <p>Non hai ancora pubblicato nessun post</p>\r\n          </Col>\r\n        )}\r\n      </Row>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default MyPosts;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}