{"ast":null,"code":"var _jsxFileName = \"/Users/giuliacolli/Desktop/blog-oauth-main/frontend/src/pages/PostDetails.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Container, Row, Col, Button, Alert } from 'react-bootstrap';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport axios from 'axios';\nimport Comments from '../components/Comments';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst PostDetails = () => {\n  _s();\n  var _post$readTime, _post$readTime2, _post$author, _post$author2;\n  const [post, setPost] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    user\n  } = useAuth();\n  useEffect(() => {\n    const fetchPost = async () => {\n      try {\n        setLoading(true);\n        const response = await axios.get(`http://localhost:3100/posts/${id}`);\n        setPost(response.data);\n        setError(null);\n      } catch (error) {\n        console.error('Error fetching post:', error);\n        setError('Errore nel caricamento del post');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchPost();\n  }, [id]);\n  const handleDelete = async () => {\n    if (window.confirm('Sei sicuro di voler eliminare questo post?')) {\n      try {\n        await axios.delete(`http://localhost:3100/posts/${id}`);\n        navigate('/my-posts');\n      } catch (err) {\n        setError('Errore durante l\\'eliminazione del post');\n      }\n    }\n  };\n\n  // Verifica se l'utente è l'autore del post\n  const isAuthor = user && post.author && user._id === post.author._id;\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"mt-5\",\n    children: [loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Caricamento in corso...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 25\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 23\n    }, this), post && post._id && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        className: \"mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          md: 8,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-between align-items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: post.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 33\n            }, this), isAuthor && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outline-primary\",\n                className: \"me-2\",\n                onClick: () => navigate(`/posts/edit/${post._id}`),\n                children: \"Modifica\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 59,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"outline-danger\",\n                onClick: handleDelete,\n                children: \"Elimina\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"badge bg-secondary me-2\",\n              children: post.category\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"text-muted\",\n              children: [(_post$readTime = post.readTime) === null || _post$readTime === void 0 ? void 0 : _post$readTime.value, \" \", (_post$readTime2 = post.readTime) === null || _post$readTime2 === void 0 ? void 0 : _post$readTime2.unit]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: post.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4\",\n            children: /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"text-muted\",\n              children: [\"Autore: \", (_post$author = post.author) === null || _post$author === void 0 ? void 0 : _post$author.firstName, \" \", (_post$author2 = post.author) === null || _post$author2 === void 0 ? void 0 : _post$author2.lastName]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 4,\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: post.cover,\n            alt: post.title,\n            className: \"img-fluid rounded shadow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Comments, {\n        postId: post._id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n};\n_s(PostDetails, \"wjqUceQg4Fweh7RnoP7vQ7bbjgw=\", false, function () {\n  return [useParams, useNavigate, useAuth];\n});\n_c = PostDetails;\nexport default PostDetails;\nvar _c;\n$RefreshReg$(_c, \"PostDetails\");","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Button","Alert","useParams","useNavigate","useAuth","axios","Comments","jsxDEV","_jsxDEV","Fragment","_Fragment","PostDetails","_s","_post$readTime","_post$readTime2","_post$author","_post$author2","post","setPost","loading","setLoading","error","setError","id","navigate","user","fetchPost","response","get","data","console","handleDelete","window","confirm","delete","err","isAuthor","author","_id","className","children","fileName","_jsxFileName","lineNumber","columnNumber","variant","md","title","onClick","category","readTime","value","unit","content","firstName","lastName","src","cover","alt","postId","_c","$RefreshReg$"],"sources":["/Users/giuliacolli/Desktop/blog-oauth-main/frontend/src/pages/PostDetails.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Container, Row, Col, Button, Alert } from 'react-bootstrap';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport axios from 'axios';\r\nimport Comments from '../components/Comments';\r\n\r\nconst PostDetails = () => {\r\n    const [post, setPost] = useState({});\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const { user } = useAuth();\r\n\r\n    useEffect(() => {\r\n        const fetchPost = async () => {\r\n            try {\r\n                setLoading(true);\r\n                const response = await axios.get(`http://localhost:3100/posts/${id}`);\r\n                setPost(response.data);\r\n                setError(null);\r\n            } catch (error) {\r\n                console.error('Error fetching post:', error);\r\n                setError('Errore nel caricamento del post');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchPost();\r\n    }, [id]);\r\n\r\n    const handleDelete = async () => {\r\n        if (window.confirm('Sei sicuro di voler eliminare questo post?')) {\r\n            try {\r\n                await axios.delete(`http://localhost:3100/posts/${id}`);\r\n                navigate('/my-posts');\r\n            } catch (err) {\r\n                setError('Errore durante l\\'eliminazione del post');\r\n            }\r\n        }\r\n    };\r\n\r\n    // Verifica se l'utente è l'autore del post\r\n    const isAuthor = user && post.author && user._id === post.author._id;\r\n\r\n    return (\r\n        <Container className=\"mt-5\">\r\n            {loading && <p>Caricamento in corso...</p>}\r\n            {error && <Alert variant=\"danger\">{error}</Alert>}\r\n            {post && post._id && (\r\n                <>\r\n                    <Row className=\"mb-4\">\r\n                        <Col md={8}>\r\n                            <div className=\"d-flex justify-content-between align-items-center\">\r\n                                <h1>{post.title}</h1>\r\n                                {isAuthor && (\r\n                                    <div>\r\n                                        <Button \r\n                                            variant=\"outline-primary\" \r\n                                            className=\"me-2\"\r\n                                            onClick={() => navigate(`/posts/edit/${post._id}`)}\r\n                                        >\r\n                                            Modifica\r\n                                        </Button>\r\n                                        <Button \r\n                                            variant=\"outline-danger\"\r\n                                            onClick={handleDelete}\r\n                                        >\r\n                                            Elimina\r\n                                        </Button>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                            <div className=\"mb-3\">\r\n                                <span className=\"badge bg-secondary me-2\">{post.category}</span>\r\n                                <small className=\"text-muted\">\r\n                                    {post.readTime?.value} {post.readTime?.unit}\r\n                                </small>\r\n                            </div>\r\n                            <p>{post.content}</p>\r\n                            <div className=\"mt-4\">\r\n                                <small className=\"text-muted\">\r\n                                    Autore: {post.author?.firstName} {post.author?.lastName}\r\n                                </small>\r\n                            </div>\r\n                        </Col>\r\n                        <Col md={4}>\r\n                            <img \r\n                                src={post.cover} \r\n                                alt={post.title} \r\n                                className=\"img-fluid rounded shadow\"\r\n                            />\r\n                        </Col>\r\n                    </Row>\r\n                    <Comments postId={post._id} />\r\n                </>\r\n            )}\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default PostDetails;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}